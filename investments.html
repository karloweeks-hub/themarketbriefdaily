<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Investments | The Market Brief Daily</title>
  <meta name="description" content="Watchlist and research list with a model portfolio tracker." />
  <meta name="theme-color" content="#ffffff" />
  <link rel="stylesheet" href="/assets/style.css" />
</head>

<body>
  <a class="skip-link" href="#content">Skip to content</a>

  <header class="site-header">
    <div class="container header-inner">
      <a class="brand" href="/" aria-label="Home">
        <img class="brand-logo" src="/assets/images/logo.png" alt="The Market Brief Daily logo" />
        <span class="brand-stack">
          <span class="brand-title">The Market Brief Daily</span>
          <span class="brand-sub">Market structure • Physical supply • Macro transmission</span>
        </span>
      </a>

      <nav class="nav" aria-label="Primary">
        <a href="/">Home</a>
        <a href="/posts.html">Posts</a>
        <a class="is-active" href="/investments.html">Investments</a>
        <a href="/about.html">About</a>
        <a href="/contact.html">Contact</a>
      </nav>
    </div>
  </header>

  <main id="content" class="page">
    <div class="container">
      <header class="page-header">
        <div class="page-kicker">Investments</div>
        <h1 class="page-title">Watchlist + model portfolio</h1>
        <p class="page-lead">
          A structured research list with a local model portfolio tracker. Informational only — not investment advice.
          See <a href="/disclaimer.html">disclaimer</a>.
        </p>
      </header>

      <!-- Portfolio summary + P&L -->
      <section class="portfolio" aria-label="Portfolio summary">
        <div class="portfolio-top">
          <div>
            <div class="p-title">Model Portfolio (Local)</div>
            <div class="p-sub">
              Starts with <b>$100,000</b> USD. Prices are saved in your browser and can auto-fill from <code>/data/prices.json</code>.
            </div>
            <div class="p-sub">Price feed last updated: <b id="priceAsOf">—</b></div>
          </div>
          <div class="p-actions">
            <button class="p-btn" id="btnReset" type="button">Reset to default</button>
            <button class="p-btn" id="btnClearPrices" type="button">Clear prices</button>
          </div>
        </div>

        <div class="p-kpis">
          <div class="kpi">
            <div class="label">Net liquidation</div>
            <div class="value" id="kpiNet">$—</div>
            <div class="sub" id="kpiNetSub">Cash + holdings value</div>
          </div>
          <div class="kpi">
            <div class="label">Total P&L</div>
            <div class="value" id="kpiPnL">$—</div>
            <div class="sub" id="kpiPnLSub">Based on entry vs current</div>
          </div>
          <div class="kpi">
            <div class="label">Cash</div>
            <div class="value" id="kpiCash">$—</div>
            <div class="sub">Unallocated model cash</div>
          </div>
          <div class="kpi">
            <div class="label">Exposure</div>
            <div class="value" id="kpiExposure">$—</div>
            <div class="sub">Market value invested</div>
          </div>
        </div>

        <div class="note" style="margin-top:14px;">
          <b>How it works:</b> Entry and current prices can auto-fill from <code>/data/prices.json</code>. If you type over a value,
          your manual number is kept. Shares are calculated from allocation ÷ entry price.
        </div>

        <div style="height:14px;"></div>

        <div class="table-wrap" aria-label="Holdings table">
          <table>
            <thead>
              <tr>
                <th>Stock</th>
                <th>Risk</th>
                <th>Allocation</th>
                <th>Entry Price</th>
                <th>Current Price</th>
                <th>Shares</th>
                <th>Market Value</th>
                <th>P&L</th>
                <th>P&L %</th>
              </tr>
            </thead>
            <tbody id="holdingsBody"></tbody>
          </table>
        </div>
      </section>

      <div class="inv-grid">

        <!-- LEFT: thesis notes -->
        <section aria-label="Watchlist notes">
          <div class="kicker">Framework</div>
          <h2>Risk framing</h2>
          <p class="lead">
            Treat each name as: thesis → indicators → invalidation → sizing. Development-stage equities require strict risk control.
          </p>

          <div class="inv-card">
            <div class="inv-head">
              <div class="inv-name">Alamos Gold (AGI) — Established Canadian producer</div>
              <div class="inv-meta">Lower risk</div>
            </div>
            <div class="inv-body">
              <p><b>Why it’s on the list:</b> Potential production growth (guidance), operating scale, and clearer cost structure versus early-stage developers.</p>
              <p><b>Primary risks:</b> execution on growth plans, cost inflation, and commodity-price sensitivity.</p>
            </div>
          </div>

          <div class="inv-card">
            <div class="inv-head">
              <div class="inv-name">Fortuna Mining (FSM) — Gold/Silver hybrid</div>
              <div class="inv-meta">Lower risk</div>
            </div>
            <div class="inv-body">
              <p><b>Why it’s on the list:</b> Multi-asset exposure with geographic diversification; can reduce single-country dependence.</p>
              <p><b>Primary risks:</b> jurisdiction and operational risk across regions; cost control; metals-price volatility.</p>
            </div>
          </div>

          <div class="inv-card">
            <div class="inv-head">
              <div class="inv-name">Galiano Gold (GAU) — Turnaround small cap</div>
              <div class="inv-meta">Medium risk</div>
            </div>
            <div class="inv-body">
              <p><b>Why it’s on the list:</b> Asymmetric outcomes if the operating story improves; exploration and resource updates can move the equity.</p>
              <p><b>Primary risks:</b> single-asset concentration; higher volatility; operational execution.</p>
            </div>
          </div>

          <div class="inv-card">
            <div class="inv-head">
              <div class="inv-name">Newfound Gold (NFGC) — High-grade Canadian discovery</div>
              <div class="inv-meta">Higher risk</div>
            </div>
            <div class="inv-body">
              <p><b>Why it’s on the list:</b> High-grade discovery potential; catalysts are typically drilling/results and development milestones.</p>
              <p><b>Primary risks:</b> pre-revenue development; financing/dilution; timeline slippage; permitting.</p>
            </div>
          </div>

          <div class="inv-card">
            <div class="inv-head">
              <div class="inv-name">Vista Gold (VGZ) — Australian leverage play</div>
              <div class="inv-meta">Higher risk</div>
            </div>
            <div class="inv-body">
              <p><b>Why it’s on the list:</b> Single-asset development exposure can behave like leveraged beta to gold under the right conditions.</p>
              <p><b>Primary risks:</b> no operating revenue; long timelines; financing requirements.</p>
            </div>
          </div>

          <div class="inv-card">
            <div class="inv-head">
              <div class="inv-name">New Pacific Metals (NEWP) — Bolivia silver development</div>
              <div class="inv-meta">Higher risk</div>
            </div>
            <div class="inv-body">
              <p><b>Why it’s on the list:</b> Large undeveloped silver projects; potential upside if silver is bullish and the project de-risks.</p>
              <p><b>Primary risks:</b> geopolitical risk; community relations; nationalization history; silver volatility.</p>
            </div>
          </div>

          <div class="note">
            <b>Disclosure:</b> informational only; not investment advice. See <a href="/disclaimer.html">disclaimer</a>.
          </div>
        </section>

        <!-- RIGHT: charts -->
        <aside aria-label="Charts">
          <div class="kicker">Market data</div>
          <h2>Charts</h2>
          <p class="lead">Embedded from TradingView. If a symbol doesn’t load, adjust its exchange prefix.</p>

          <div class="tv-stack">

            <div class="tv-box">
              <div class="tradingview-widget-container"><div class="tradingview-widget-container__widget"></div>
                <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-mini-symbol-overview.js" async>
                {"symbol":"NYSE:AGI","width":"100%","height":"220","locale":"en","dateRange":"12M","colorTheme":"light","isTransparent":false,"autosize":true}
                </script>
              </div>
            </div>

            <div class="tv-box">
              <div class="tradingview-widget-container"><div class="tradingview-widget-container__widget"></div>
                <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-mini-symbol-overview.js" async>
                {"symbol":"NYSE:FSM","width":"100%","height":"220","locale":"en","dateRange":"12M","colorTheme":"light","isTransparent":false,"autosize":true}
                </script>
              </div>
            </div>

            <div class="tv-box">
              <div class="tradingview-widget-container"><div class="tradingview-widget-container__widget"></div>
                <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-mini-symbol-overview.js" async>
                {"symbol":"NYSEAMERICAN:GAU","width":"100%","height":"220","locale":"en","dateRange":"12M","colorTheme":"light","isTransparent":false,"autosize":true}
                </script>
              </div>
            </div>

            <div class="tv-box">
              <div class="tradingview-widget-container"><div class="tradingview-widget-container__widget"></div>
                <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-mini-symbol-overview.js" async>
                {"symbol":"NYSEAMERICAN:NFGC","width":"100%","height":"220","locale":"en","dateRange":"12M","colorTheme":"light","isTransparent":false,"autosize":true}
                </script>
              </div>
            </div>

            <div class="tv-box">
              <div class="tradingview-widget-container"><div class="tradingview-widget-container__widget"></div>
                <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-mini-symbol-overview.js" async>
                {"symbol":"NYSEAMERICAN:VGZ","width":"100%","height":"220","locale":"en","dateRange":"12M","colorTheme":"light","isTransparent":false,"autosize":true}
                </script>
              </div>
            </div>

            <div class="tv-box">
              <div class="tradingview-widget-container"><div class="tradingview-widget-container__widget"></div>
                <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-mini-symbol-overview.js" async>
                {"symbol":"NYSE:NEWP","width":"100%","height":"220","locale":"en","dateRange":"12M","colorTheme":"light","isTransparent":false,"autosize":true}
                </script>
              </div>
            </div>

          </div>
        </aside>

      </div>
    </div>
  </main>

  <footer class="site-footer">
    <div class="container footer-inner">
      <div>
        <div class="footer-brand">The Market Brief Daily</div>
        <div class="footer-sub">Market structure & physical supply analysis.</div>
      </div>
      <div class="footer-links">
        <a href="/posts.html">Posts</a>
        <a href="/about.html">About</a>
        <a href="/disclaimer.html">Disclaimer</a>
      </div>
    </div>
  </footer>

  <!-- Portfolio engine (client-side + pulls /data/prices.json when available) -->
  <script>
    // ===== Config =====
    const STORAGE_KEY = "mbd_portfolio_v2";
    const ENTRY_DATE = "2026-02-11"; // trade entry date (market open)

    // Default allocations (total = $100,000)
    const DEFAULT_PORTFOLIO = {
      baseCurrency: "USD",
      startingCash: 100000,
      entryDate: ENTRY_DATE,
      holdings: [
        { name:"Alamos Gold",        ticker:"AGI",  risk:"Lower",  allocation: 28000, entry: "", current: "" },
        { name:"Fortuna Mining",     ticker:"FSM",  risk:"Lower",  allocation: 22000, entry: "", current: "" },
        { name:"Galiano Gold",       ticker:"GAU",  risk:"Medium", allocation: 18000, entry: "", current: "" },
        { name:"Newfound Gold",      ticker:"NFGC", risk:"Higher", allocation: 12000, entry: "", current: "" },
        { name:"Vista Gold",         ticker:"VGZ",  risk:"Higher", allocation:  8000, entry: "", current: "" },
        { name:"New Pacific Metals", ticker:"NEWP", risk:"Higher", allocation: 12000, entry: "", current: "" }
      ]
    };

    // ===== Helpers =====
    function money(n){
      if (n === null || n === undefined || Number.isNaN(n)) return "—";
      return n.toLocaleString(undefined,{style:"currency",currency:"USD",maximumFractionDigits:0});
    }
    function money2(n){
      if (n === null || n === undefined || Number.isNaN(n)) return "—";
      return n.toLocaleString(undefined,{style:"currency",currency:"USD",maximumFractionDigits:2});
    }
    function pct(n){
      if (n === null || n === undefined || Number.isNaN(n)) return "—";
      return (n*100).toFixed(2) + "%";
    }
    function fmtTime(iso){
      if (!iso) return "—";
      try{
        const d = new Date(iso);
        return d.toLocaleString();
      }catch{
        return iso;
      }
    }
    function clone(obj){ return JSON.parse(JSON.stringify(obj)); }

    function loadPortfolio(){
      const raw = localStorage.getItem(STORAGE_KEY);
      if (!raw) return clone(DEFAULT_PORTFOLIO);
      try { return JSON.parse(raw); }
      catch { return clone(DEFAULT_PORTFOLIO); }
    }
    function savePortfolio(p){
      localStorage.setItem(STORAGE_KEY, JSON.stringify(p));
    }

    function calcRow(h){
      const entry = parseFloat(h.entry);
      const current = parseFloat(h.current);

      let shares = null;
      if (!Number.isNaN(entry) && entry > 0) shares = h.allocation / entry;

      let mkt = null, pnl = null, pnlPct = null;
      if (shares !== null && !Number.isNaN(current) && current > 0){
        mkt = shares * current;
        pnl = mkt - h.allocation;
        pnlPct = pnl / h.allocation;
      }
      return { shares, mkt, pnl, pnlPct };
    }

    function render(){
      const p = loadPortfolio();
      const body = document.getElementById("holdingsBody");
      if (!body) return;

      body.innerHTML = "";

      let invested = 0;
      let mktTotal = 0;
      let pnlTotal = 0;

      p.holdings.forEach((h, idx) => {
        invested += h.allocation;

        const r = calcRow(h);
        if (r.mkt !== null) mktTotal += r.mkt;
        if (r.pnl !== null) pnlTotal += r.pnl;

        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td><div><b>${h.name}</b> <small>(${h.ticker})</small></div></td>
          <td>${h.risk}</td>
          <td>${money(h.allocation)}</td>
          <td><input class="p-in" inputmode="decimal" placeholder="auto" value="${h.entry}" data-idx="${idx}" data-field="entry"></td>
          <td><input class="p-in" inputmode="decimal" placeholder="auto" value="${h.current}" data-idx="${idx}" data-field="current"></td>
          <td>${r.shares === null ? "—" : r.shares.toFixed(4)}</td>
          <td>${r.mkt === null ? "—" : money2(r.mkt)}</td>
          <td class="${r.pnl === null ? "" : (r.pnl >= 0 ? "pos" : "neg")}">${r.pnl === null ? "—" : money2(r.pnl)}</td>
          <td class="${r.pnlPct === null ? "" : (r.pnlPct >= 0 ? "pos" : "neg")}">${r.pnlPct === null ? "—" : pct(r.pnlPct)}</td>
        `;
        body.appendChild(tr);
      });

      const cash = Math.max(0, p.startingCash - invested);
      const net = cash + mktTotal;

      const kCash = document.getElementById("kpiCash");
      const kExp = document.getElementById("kpiExposure");
      const kNet = document.getElementById("kpiNet");
      const kPnL = document.getElementById("kpiPnL");
      const kPnLSub = document.getElementById("kpiPnLSub");
      const kNetSub = document.getElementById("kpiNetSub");

      if (kCash) kCash.textContent = money(cash);
      if (kExp)  kExp.textContent  = money2(mktTotal);
      if (kNet)  kNet.textContent  = money2(net);
      if (kPnL)  kPnL.textContent  = (mktTotal === 0) ? "$—" : money2(pnlTotal);

      if (kPnLSub) kPnLSub.textContent = (mktTotal === 0) ? "Enter prices to compute" : "Sum of holdings P&L";
      if (kNetSub) kNetSub.textContent = (mktTotal === 0) ? "Cash only until priced" : "Cash + market value";
    }

    async function applyAutoPrices(){
      try{
        const res = await fetch("/data/prices.json", { cache: "no-store" });
        if (!res.ok) return;

        const data = await res.json();
        const p = loadPortfolio();

        const asOfEl = document.getElementById("priceAsOf");
        if (asOfEl) asOfEl.textContent = fmtTime(data.asOf);

        for (const h of p.holdings){
          const q = data.quotes && data.quotes[h.ticker];
          if (!q) continue;

          // Only auto-fill if field is empty (manual override wins)
          if (!h.current && q.close != null && q.close !== "") h.current = String(q.close);
          if (!h.entry   && q.open  != null && q.open  !== "") h.entry   = String(q.open);
        }

        savePortfolio(p);
        render();
      }catch(e){
        // silent fail
      }
    }

    function wire(){
      document.addEventListener("input", (e) => {
        const t = e.target;
        if (!t.classList || !t.classList.contains("p-in")) return;

        const idx = parseInt(t.getAttribute("data-idx"), 10);
        const field = t.getAttribute("data-field");

        const p = loadPortfolio();
        p.holdings[idx][field] = t.value;
        savePortfolio(p);
        render();
      });

      const btnReset = document.getElementById("btnReset");
      if (btnReset){
        btnReset.addEventListener("click", () => {
          savePortfolio(clone(DEFAULT_PORTFOLIO));
          render();
          applyAutoPrices();
        });
      }

      const btnClear = document.getElementById("btnClearPrices");
      if (btnClear){
        btnClear.addEventListener("click", () => {
          const p = loadPortfolio();
          p.holdings = p.holdings.map(h => ({...h, entry:"", current:""}));
          savePortfolio(p);
          render();
          applyAutoPrices();
        });
      }

      // Refresh hourly while page is open
      setInterval(() => applyAutoPrices(), 60 * 60 * 1000);
    }

    wire();
    render();
    applyAutoPrices();
  </script>
</body>
</html>
